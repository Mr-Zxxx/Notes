# å¼€å‘æ–‡æ¡£

### ç¬¬ä¸€å±‚ï¼šæœ€ç®€å¯è¿è¡Œï¼ˆMVP å¿…å¤‡ï¼‰

| æ–‡æ¡£           | ç›®çš„                       | å…¸å‹æ–‡ä»¶/ä½ç½®                                   | å·¥å…·ç¤ºä¾‹                |
| :------------- | :------------------------- | :---------------------------------------------- | :---------------------- |
| README.md      | æ–°äºº 5 åˆ†é’Ÿè·‘èµ·æ¥          | æ ¹ç›®å½•                                          | Markdown                |
| ç¯å¢ƒæ¸…å•       | ä¸€é”®è¿˜åŸå¼€å‘/æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒ | `docs/ENV.md` + Docker Compose / Nix / Brewfile | Docker, Nix             |
| æ„å»ºä¸éƒ¨ç½²è„šæœ¬ | CI/CD å¯é‡å¤               | `.github/workflows/`, `Makefile`, `deploy.sh`   | GitHub Actions, Jenkins |
| CHANGELOG.md   | ç”¨æˆ·å¯è§çš„å˜æ›´è®°å½•         | æ ¹ç›®å½•                                          | Keep a Changelog è§„èŒƒ   |

> âœ… å°å›¢é˜Ÿï¼ˆ<5 äººï¼‰å…ˆä¿è¯è¿™ 4 ä¸ªæ–‡ä»¶å­˜åœ¨ï¼Œå°±èƒ½åšåˆ°â€œä»»ä½•æ–°äºº 30 åˆ†é’Ÿèƒ½è·‘èµ·æ¥â€ã€‚

------

### ç¬¬äºŒå±‚ï¼šé•¿æœŸå¯ç»´æŠ¤ï¼ˆä¸Šçº¿åå¿…é¡»è¡¥é½ï¼‰

| ç±»åˆ«          | æ–‡æ¡£                | é¢å‘å¯¹è±¡       | å…³é”®å†…å®¹                                 | æ¨èå·¥å…·                          |
| :------------ | :------------------ | :------------- | :--------------------------------------- | :-------------------------------- |
| **éœ€æ±‚/äº§å“** | PRDï¼ˆäº§å“éœ€æ±‚æ–‡æ¡£ï¼‰ | äº§å“ç»ç†ã€å®¢æˆ· | ä¸šåŠ¡æµç¨‹ã€è§’è‰²æƒé™ã€éªŒæ”¶æ ‡å‡†             | Notionã€é£ä¹¦å¤šç»´è¡¨                |
| **æŠ€æœ¯è®¾è®¡**  | ç³»ç»Ÿæ¶æ„å›¾          | å…¨å›¢é˜Ÿ         | C4 Modelï¼ˆä¸Šä¸‹æ–‡ã€å®¹å™¨ã€ç»„ä»¶ã€ä»£ç ï¼‰     | draw.ioã€Structurizr              |
|               | ADRï¼ˆæ¶æ„å†³ç­–è®°å½•ï¼‰ | æŠ€æœ¯éª¨å¹²       | â€œä¸ºä»€ä¹ˆç”¨ Kafka è€Œä¸æ˜¯ RabbitMQâ€         | Markdown + `docs/adr/0001-xxx.md` |
|               | ER å›¾ / API å¥‘çº¦    | å‰åç«¯         | OpenAPI/Swaggerã€dbdiagram.io            | Swagger UIã€dbdocs                |
| **ä»£ç çº§**    | ä»£ç æ³¨é‡Š & ç±»å‹     | å¼€å‘è€…         | JSDoc / TypeDoc / docstring              | IDE è‡ªåŠ¨ç”Ÿæˆ                      |
|               | æ¨¡å— README         | å¼€å‘è€…         | æ¯ä¸ªå¾®æœåŠ¡/æ¨¡å—çš„å…¥å£ã€é…ç½®              | åŒä»“åº“                            |
| **æµ‹è¯•**      | æµ‹è¯•ç­–ç•¥            | QAã€Dev        | å•å…ƒ/æ¥å£/E2E èŒƒå›´ã€æµ‹è¯•æ•°æ®             | `docs/TEST.md`                    |
|               | å›å½’æµ‹è¯•ç”¨ä¾‹        | QA             | æ ¸å¿ƒåœºæ™¯æ¸…å•                             | TestLinkã€ç¦…é“                    |
| **è¿ç»´**      | è¿è¡Œæ‰‹å†Œï¼ˆRunbookï¼‰ | DevOpsã€å€¼ç­   | æ—¥å¿—ä½ç½®ã€é‡å¯å‘½ä»¤ã€å›æ»šæ­¥éª¤             | `docs/RUNBOOK.md`                 |
|               | ç›‘æ§å‘Šè­¦è§„åˆ™        | DevOps         | Prometheus rulesã€Grafana dashboard é“¾æ¥ | YAML + README                     |
| **å®‰å…¨**      | å¨èƒå»ºæ¨¡æŠ¥å‘Š        | å®‰å…¨å›¢é˜Ÿ       | STRIDEã€æ•°æ®æµå›¾                         | Microsoft TMT                     |
|               | ä¾èµ–æ¼æ´æ¸…å•        | å…¨å›¢é˜Ÿ         | `pnpm audit`, `trivy` æŠ¥å‘Š               | GitHub Dependabot                 |

------

### ç¬¬ä¸‰å±‚ï¼šç»„ç»‡çº§æ²»ç†ï¼ˆå¤šé¡¹ç›®/å¤šå›¢é˜Ÿåä½œï¼‰

| æ–‡æ¡£                     | ç›®çš„          | ç»´æŠ¤é¢‘ç‡   | å·¥å…·                                |
| :----------------------- | :------------ | :--------- | :---------------------------------- |
| äº§å“è·¯çº¿å›¾ï¼ˆRoadmapï¼‰    | å¯¹é½å•†ä¸šç›®æ ‡  | æ¯å­£åº¦     | Jiraã€ProductPlan                   |
| æŠ€æœ¯å€º Backlog           | é˜²æ­¢è…çƒ‚      | æ¯æœˆ       | Jira label: tech-debt               |
| ç¼–ç è§„èŒƒ                 | ç»Ÿä¸€é£æ ¼      | æ¯å¹´       | ESLint/Prettier + `CONTRIBUTING.md` |
| å‘å¸ƒæµç¨‹ï¼ˆRelease Flowï¼‰ | ç°åº¦/å›æ»šç­–ç•¥ | æ¯æ¬¡å¤§ç‰ˆæœ¬ | GitFlow æˆ– GitHub Flow æ–‡æ¡£         |
| ç¾éš¾æ¢å¤è®¡åˆ’ï¼ˆDRPï¼‰      | æœºæˆ¿/äº‘æ•…éšœ   | æ¯åŠå¹´     | `docs/DR.md` + æ¼”ç»ƒè®°å½•             |
| æ•°æ®å­—å…¸ & éšç§åˆè§„      | GDPR/å›½å¯†åˆè§„ | éšè¿­ä»£     | OneTrustã€è‡ªç ”è¡¨æ ¼                  |
| äº¤æ¥æ–‡æ¡£ï¼ˆHandoverï¼‰     | äººå‘˜æµåŠ¨      | ç¦»èŒå‰     | Confluence æ¨¡æ¿                     |

------

### ğŸ“ ç›®å½•æ¨¡æ¿ï¼ˆå¯ç›´æ¥ç”¨ï¼‰

```
repo-root/
â”œâ”€â”€ README.md
â”œâ”€â”€ CHANGELOG.md
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ENV.md
â”‚   â”œâ”€â”€ RUNBOOK.md
â”‚   â”œâ”€â”€ TEST.md
â”‚   â”œâ”€â”€ adr/
â”‚   â”‚   â””â”€â”€ 0001-use-kafka-for-events.md
â”‚   â””â”€â”€ arch/
â”‚       â”œâ”€â”€ c4-context.png
â”‚       â””â”€â”€ openapi.yaml
â”œâ”€â”€ .github/workflows/ci.yml
â””â”€â”€ CONTRIBUTING.md
```

------

### è½åœ°å»ºè®®

1. **å…ˆå†™â€œäº”åˆ†é’Ÿä¸Šæ‰‹â€ README**ï¼Œå…¶ä»–æ–‡æ¡£æŒ‰æ•…éšœ/æ–°äºº/äº¤æ¥ç—›ç‚¹é€æ­¥è¡¥ã€‚
2. **æ–‡æ¡£å³ä»£ç **ï¼šæŠŠ ADRã€API å¥‘çº¦ã€ç›‘æ§è§„åˆ™å…¨éƒ¨è¿› Gitï¼ŒMR è¯„å®¡å¼ºåˆ¶æ›´æ–°ã€‚
3. **è®¾ç«‹å•ä¸€å¯ä¿¡æº**ï¼šéœ€æ±‚ç”¨ Notion â†’ è‡ªåŠ¨ç”Ÿæˆ Jira ä»»åŠ¡ â†’ ä»£ç æ³¨é‡Šåå‘é“¾æ¥ PRDã€‚
4. **æ¯å­£åº¦â€œæ–‡æ¡£å¯ç”¨æ€§æ¼”ç»ƒâ€**ï¼šéšæœºæŠ½æ–°äºº 30 åˆ†é’Ÿä»é›¶æ­å»ºç¯å¢ƒï¼Œå¤±è´¥å°±è¡¥æ–‡æ¡£ã€‚





# æ•°æ®åº“

#### è¡¨çš„è®¾è®¡

è¡¨éœ€è¦éµå®ˆè¡¨åŠŸèƒ½å•ä¸€èŒè´£

éœ€è¦è€ƒè™‘çš„æ•°æ®çš„**æµåŠ¨æ–¹å‘æ€§ï¼Œä¿è¯é€»è¾‘ä¸Šçš„æ“ä½œç»Ÿä¸€**ï¼Œä¾‹å¦‚**å…³æ³¨åŠŸèƒ½**

å¯¹äºæŒ‡å®šç±»å‹æšä¸¾ç±»å‹æŸ¥è¯¢æ•ˆç‡æ›´é«˜ï¼Œintæ‰©å±•æ€§æ›´å¼º

#### pointæ•°æ®ç±»å‹

å¯ä»¥å­˜å‚¨ç»çº¬åº¦ä¿¡æ¯ï¼Œå¹¶ç›´æ¥å¯¹ç©ºé—´æ•°æ®å¤„ç†



# Vue

### Vue 3 ç”Ÿå‘½å‘¨æœŸé’©å­

| é’©å­                  | ç”¨æ³•è¯´æ˜                                                     | æ³¨æ„äº‹é¡¹ / æ¨èåœºæ™¯                                       |
| --------------------- | ------------------------------------------------------------ | --------------------------------------------------------- |
| **setup()**           | ç»„ä»¶åˆ›å»ºæ—¶æ‰§è¡Œï¼Œè¿›è¡Œåˆå§‹åŒ–ï¼Œæ›¿ä»£ `beforeCreate` å’Œ `created` | è¿™é‡Œä¸èƒ½è®¿é—® `this`ï¼Œåº”ä½¿ç”¨ç»„åˆå¼ APIï¼ˆrefã€reactive ç­‰ï¼‰ |
| **onBeforeMount()**   | æŒ‚è½½å‰æ‰§è¡Œ                                                   | ä¸€èˆ¬ç”¨å¾—å°‘ï¼Œå‡†å¤‡æŒ‚è½½ç›¸å…³æ•°æ®                              |
| **onMounted()**       | æŒ‚è½½å®Œæˆï¼ŒDOM æ¸²æŸ“å®Œæˆ                                       | æ“ä½œ DOMã€è°ƒç”¨ç¬¬ä¸‰æ–¹åº“çš„åˆå§‹åŒ–                            |
| **onBeforeUpdate()**  | æ•°æ®å˜åŒ–è§¦å‘è§†å›¾æ›´æ–°å‰                                       | ä¸è¦åœ¨è¿™é‡Œæ”¹å“åº”å¼æ•°æ®ï¼Œé¿å…æ­»å¾ªç¯                        |
| **onUpdated()**       | è§†å›¾æ›´æ–°å®Œæˆå                                               | æ“ä½œæ›´æ–°åçš„ DOM                                          |
| **onBeforeUnmount()** | ç»„ä»¶å¸è½½å‰                                                   | åšèµ„æºé‡Šæ”¾ã€è§£ç»‘äº‹ä»¶ç­‰æ¸…ç†å·¥ä½œ                            |
| **onUnmounted()**     | ç»„ä»¶å¸è½½å                                                   | å·²ä¸èƒ½è®¿é—®å“åº”å¼æ•°æ®                                      |
| **onActivated()**     | keep-alive ç»„ä»¶æ¿€æ´»                                          | æ¢å¤æ•°æ®ã€é‡æ–°å‘è¯·æ±‚                                      |
| **onDeactivated()**   | keep-alive ç»„ä»¶åœç”¨                                          | æš‚åœå®šæ—¶å™¨ã€ä¿å­˜çŠ¶æ€                                      |

![ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå›¾ç¤º](./assets/lifecycle_zh-CN.W0MNXI0C.png)



### éšè—æ»šåŠ¨æ¡

| æµè§ˆå™¨        | éšè—æ»šåŠ¨æ¡çš„æ–¹æ³•                         |
| ------------- | ---------------------------------------- |
| Chrome/Safari | `::-webkit-scrollbar { display: none; }` |
| Firefox       | `scrollbar-width: none;`                 |
| IE/Edge       | `-ms-overflow-style: none;`              |

### è¯­æ³•

v-htmlï¼šè§£æå†…å®¹ä¸­çš„æ ‡ç­¾ä¸ºhtmlå…ƒç´ 





------

**âš ï¸ æ³¨æ„ï¼š**

- è™½ç„¶æ»šåŠ¨æ¡ä¸å¯è§ï¼Œä½†ç”¨æˆ·å¯ä»¥ç”¨ **é¼ æ ‡æ»šè½® / è§¦æ‘¸æ¿ / æ‰‹æŒ‡æ»‘åŠ¨ / é”®ç›˜æ–¹å‘é”®** æ¥æ»šåŠ¨ã€‚
- ä¸å»ºè®®ç”¨äºç”¨æˆ·å¿…é¡»æ˜ç¡®çŸ¥é“å¯æ»šåŠ¨çš„åŒºåŸŸï¼Œé™¤éä½ èƒ½ç”¨ç®­å¤´æç¤ºæˆ–åŠ¨ç”»å¼•å¯¼ç”¨æˆ·ã€‚



# ç½‘æ ¼å¸ƒå±€

é‡‡ç”¨ç½‘æ ¼å¸ƒå±€çš„åŒºåŸŸï¼Œç§°ä¸º"å®¹å™¨"ï¼ˆcontainerï¼‰ã€‚å®¹å™¨å†…éƒ¨é‡‡ç”¨ç½‘æ ¼å®šä½çš„å­å…ƒç´ ï¼Œç§°ä¸º"é¡¹ç›®"ï¼ˆitemï¼‰ã€‚

![img](./assets/1_bg2019032502.png)

# MapLibre GL JS

**MapLibre GL JS**ï¼ˆä¸€ä¸ªå¼€æºçš„ Web åœ°å›¾åº“ï¼Œä¸ Mapbox GL JS å…¼å®¹ï¼‰



# ffmpeg

å¤„ç†è§†é¢‘å·¥å…·ï¼Œå¯ä»¥ç”¨äºæˆªå–è§†é¢‘å°é¢



# è¿œç¨‹SSHå¼€å‘

ç§˜é’¥ï¼š

```
PS C:\Users\Admin> ssh-keygen -t rsa -b 4096
Generating public/private rsa key pair.
Enter file in which to save the key (C:\Users\Admin/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in C:\Users\Admin/.ssh/id_rsa        
Your public key has been saved in C:\Users\Admin/.ssh/id_rsa.pub        
The key fingerprint is:
SHA256:gPoeX7hrO8Rrr1HgG+wUIFJZIMlT1gy6vOtuMlsm8Mo admin@DESKTOP-6A52IHN
The key's randomart image is:
+---[RSA 4096]----+
|+o=B*            |
|.=+. =           |
| .. . +          |
|. .. o +         |
|.o.  .= S        |
|.... oo=         |
|..+ o.=..        |
|+*.. o=+         |
|BE  .o**.        |
+----[SHA256]-----+
PS C:\Users\Admin> 

```



# æ¨é€æ‹‰å»æ•°æ®å»é‡æœ€ç®€æ–¹æ¡ˆ

å»é‡æœ€ç®€è½åœ°æ–¹æ¡ˆï¼ˆâ‰¤ 1 MB æ•°æ®é‡é€šç”¨ï¼‰

å°é¡¹ç›®åˆ«ä¸€æ­¥åˆ°ä½æŠ„ B ç«™é‚£å¥—â€œå››å±‚è¿‡æ»¤â€ï¼Œ**ç”¨æœ€è½»é‡çš„æ–¹æ¡ˆå°±èƒ½ 99 % è§£å†³**ï¼š

1. åç«¯æ¥å£ä¸€æ¬¡æ€§è¿”å› **â€œæœ€æ–° N æ¡â€ + ä¸Šæ¬¡æœ€åä¸€æ¡ id**
2. å‰ç«¯ç”¨ **Set å»é‡** å°±å¤Ÿäº†
3. æ•°æ®é‡ä¸å¤§ï¼Œå…¨é‡æ‹‰å–ï¼Œç®€å•å¯é 

åç«¯ï¼ˆä¼ªä»£ç ï¼‰

```php
// è¯·æ±‚ï¼šGET /api/works?cursor=0&limit=20
$cursor = (int) request('cursor');
$list  = Work::orderBy('id','desc')
              ->where('id','<',$cursor)   // åªå–æ¯” cursor å°çš„
              ->limit(20)
              ->get();
return [
  'list' => $list,
  'next_cursor' => $list->last()->id ?? 0
];
```

å‰ç«¯ï¼ˆVue/React éƒ½ä¸€æ ·ï¼‰

```js
const ids = new Set();        // ä¼šè¯çº§å»é‡
const list = ref([]);

const loadMore = async () => {
  const { data } = await axios.get('/api/works', {
    params: { cursor: list.value.at(-1)?.id || 0, limit: 20 }
  });
  // è¿‡æ»¤é‡å¤
  const filtered = data.list.filter(item => !ids.has(item.id));
  filtered.forEach(item => ids.add(item.id));
  list.value.push(...filtered);
};
```

**å°é¡¹ç›®ï¼šåç«¯ç»™â€œæ—¶é—´æˆ³æ¸¸æ ‡+limitâ€æ¥å£ï¼Œå‰ç«¯ä¸€ä¸ª Set å»é‡ï¼Œ20 è¡Œä»£ç æå®šï¼Œåˆ«ä¸Šå¸ƒéš†è¿‡æ»¤å™¨ã€‚**



# JavaScript

### `??` ï¼ˆç©ºå€¼åˆå¹¶ï¼‰

- åªåœ¨å·¦è¾¹æ˜¯ `null` æˆ– `undefined` æ—¶æ‰è¿”å›å³è¾¹ï¼Œå…¶å®ƒæƒ…å†µç›´æ¥è¿”å›å·¦è¾¹ã€‚

```
console.log(0 ?? 100);     // 0   ï¼ˆä¸ä¼šè¢«å½“æˆâ€œç©ºâ€ï¼‰
console.log("" ?? "é»˜è®¤");  // ""  ï¼ˆä¿ç•™ç©ºå­—ç¬¦ä¸²ï¼‰
console.log(null ?? "é»˜è®¤"); // "é»˜è®¤"
console.log(undefined ?? "é»˜è®¤"); // "é»˜è®¤"
```

### **å¯é€‰é“¾è¿ç®—ç¬¦ï¼ˆ`?.`ï¼‰**

å¯é€‰é“¾è¿ç®—ç¬¦ `?.` ç”¨æ¥ **å®‰å…¨åœ°è®¿é—®å¯¹è±¡å±æ€§æˆ–è°ƒç”¨æ–¹æ³•**ï¼Œé¿å…å› ä¸º `null` æˆ– `undefined` å¯¼è‡´æŠ¥é”™ã€‚

#### ç”¨æ³•

(1) **è®¿é—®å¯¹è±¡å±æ€§**

```
obj?.prop
```

- å¦‚æœ `obj` å­˜åœ¨ï¼Œè¿”å› `obj.prop`
- å¦‚æœ `obj` æ˜¯ `null` æˆ– `undefined`ï¼Œè¿”å› `undefined`

(2) **è®¿é—®åµŒå¥—å±æ€§**

```
user?.address?.city
```

- å¦‚æœ `user` æˆ– `user.address` æ˜¯ `null`/`undefined`ï¼Œç›´æ¥è¿”å› `undefined`

(3) **è°ƒç”¨æ–¹æ³•**

```
obj?.method?.()
```

- å¦‚æœ `obj.method` å­˜åœ¨ï¼Œå°±æ‰§è¡Œ
- å¦‚æœ `obj` æ˜¯ `null` æˆ–æ–¹æ³•ä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯è¿”å› `undefined`

(4) **è®¿é—®æ•°ç»„å…ƒç´ **

```
arr?.[0]
```

- å¦‚æœ `arr` å­˜åœ¨ï¼Œå°±å–ç¬¬ä¸€ä¸ªå…ƒç´ 
- å¦åˆ™è¿”å› `undefined`







# æœç´¢åŠŸèƒ½

é€šè¿‡æœç´¢æ¡†æ‹¼æ¥æœç´¢é¡µçš„pathä¸keywordsï¼Œè·³è½¬è‡³æœç´¢é¡µ

æ–°é¡µé¢åŠ è½½å‰é€šè¿‡pathè·å–keywordsï¼Œæ‹¿åˆ°åå‘åç«¯å‘èµ·è¯·æ±‚ï¼Œ

å°†æŸ¥è¯¢ç»“æœè¿›è¡Œæ¸²æŸ“

åœ¨ Vue ä¸­æœ‰ä¸¤ç§æ€è·¯ï¼š

------

##  ä½¿ç”¨ä¼ ç»Ÿè·³è½¬ï¼ˆæµè§ˆå™¨åˆ·æ–°ï¼‰

- **æ–¹å¼**ï¼šç›´æ¥ç”¨æµè§ˆå™¨çš„ URL è·³è½¬ã€‚

- **åšæ³•**ï¼š

  - ç‚¹å‡»æœç´¢æŒ‰é’®æ—¶ï¼Œè·å–è¾“å…¥æ¡†å…³é”®è¯ã€‚

  - æ‹¼æ¥æˆç›®æ ‡ URLï¼Œä¾‹å¦‚ `/search.html?keyword=xxx`ã€‚

  - ä½¿ç”¨ï¼š

    ```
    window.location.href = '/search.html?keyword=xxx'
    ```

  - æµè§ˆå™¨ä¼šåŠ è½½æ–°çš„é¡µé¢ï¼Œæœç´¢é¡µå¯ä»¥é€šè¿‡ URL è·å–å…³é”®è¯ã€‚

âœ… **ç‰¹ç‚¹**ï¼š

- é¡µé¢ä¼šå®Œå…¨åˆ·æ–°ã€‚
- ä¸ä¾èµ– Vue Routerã€‚
- é€‚åˆå¤šé¡µåº”ç”¨ï¼ˆMPAï¼‰åœºæ™¯ã€‚

------

##  Vue Router è·³è½¬ï¼ˆå•é¡µåº”ç”¨å†…ï¼‰

- **æ–¹å¼**ï¼š`router.push()` è·³è½¬åˆ°æœç´¢é¡µè·¯ç”±ã€‚

- **åšæ³•**ï¼š

  - è®¾ç½®ä¸€ä¸ªæœç´¢é¡µè·¯ç”± `/search`ã€‚

  - ç‚¹å‡»æŒ‰é’®ï¼š

    ```
    this.$router.push({ path: '/search', query: { keyword } })
    ```

  - Vue ä¼šåˆ‡æ¢ç»„ä»¶æ˜¾ç¤ºæœç´¢é¡µï¼ˆä¸åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼‰ã€‚

- **ç‰¹ç‚¹**ï¼š

  - URL ä¼šæ›´æ–°ï¼ˆæ¯”å¦‚ `/search?keyword=xxx`ï¼‰ã€‚
  - é¡µé¢ä¸åˆ·æ–°ï¼Œåªæ˜¯åˆ‡æ¢ç»„ä»¶ã€‚
  - SPA é£æ ¼ï¼Œæ›´å¿«ã€æ›´æµç•…ã€‚

------

###  æ€»ç»“

- **å¦‚æœä½ æƒ³è¦æ–°é¡µé¢åˆ·æ–°åŠ è½½** â†’ ç”¨ `window.location.href` æˆ– `<a>` æ ‡ç­¾ã€‚
- **å¦‚æœä½ æƒ³ä¿æŒ SPA é£æ ¼** â†’ ç”¨ `Vue Router` è·³è½¬ã€‚

------

æˆ‘å¯ä»¥å¸®ä½ ç”»ä¸€ä¸ª**æœç´¢æ¡†ç‚¹å‡» â†’ æ–°é¡µé¢è·³è½¬ â†’ è·å–å…³é”®è¯ â†’ æ˜¾ç¤ºæœç´¢ç»“æœ**çš„å®Œæ•´æµç¨‹å›¾ï¼Œè®©é€»è¾‘ä¸€ç›®äº†ç„¶ã€‚

ä½ å¸Œæœ›æˆ‘ç”»å—ï¼Ÿ

### **æœç´¢åŠŸèƒ½æµç¨‹ï¼ˆä¼ ç»Ÿå¤šé¡µè·³è½¬ç‰ˆï¼‰**

1. **è¾“å…¥å†…å®¹**

   - ç”¨æˆ·åœ¨æœç´¢æ¡†é‡Œè¾“å…¥å…³é”®è¯ã€‚
   - è¾“å…¥å†…å®¹å­˜åˆ°ä¸€ä¸ªå˜é‡ï¼Œæ¯”å¦‚ `keyword`ã€‚

2. **ç‚¹å‡»æœç´¢æŒ‰é’®**

   - ç‚¹å‡»äº‹ä»¶è§¦å‘æ–¹æ³•ã€‚

   - æ–¹æ³•é‡ŒæŠŠè¾“å…¥çš„å…³é”®è¯æ‹¼æ¥åˆ° URLï¼Œæ¯”å¦‚ï¼š

     ```
     /search.html?keyword=xxx
     ```

3. **è·³è½¬åˆ°æ–°é¡µé¢**

   - ç”¨ `window.location.href = æ‹¼æ¥å¥½çš„URL`ã€‚
   - æµè§ˆå™¨åŠ è½½ `/search.html` é¡µé¢ã€‚

4. **æ–°é¡µé¢è§£æå…³é”®è¯**

   - æ–°é¡µé¢ä¸€åŠ è½½æ—¶ï¼Œä» URL é‡Œè·å– `keyword` å‚æ•°ã€‚
   - å¯ä»¥ç”¨ `URLSearchParams` æˆ–å…¶å®ƒæ–¹å¼è§£æã€‚

5. **æ‰§è¡Œæœç´¢å¹¶æ¸²æŸ“ç»“æœ**

   - æ‹¿åˆ°å…³é”®è¯åï¼Œè°ƒç”¨åç«¯æ¥å£æˆ–è€…æœ¬åœ°æ•°æ®è¿›è¡Œæœç´¢ã€‚
   - æ¸²æŸ“æœç´¢ç»“æœåˆ—è¡¨ç»™ç”¨æˆ·çœ‹ã€‚

### è·¯å¾„è§£æ

**åŸç”Ÿ JavaScriptï¼ˆæµè§ˆå™¨ç¯å¢ƒï¼‰**

å¯ä»¥ä½¿ç”¨ `URLSearchParams` è½»æ¾è§£æï¼š

```js
// å‡è®¾å½“å‰é¡µé¢æ˜¯ä½ çš„ URL ç¤ºä¾‹
const urlParams = new URLSearchParams(window.location.search);
const rawKey = urlParams.get("key"); // è·å– URL ç¼–ç åçš„å€¼
const keyword = decodeURIComponent(rawKey); // è§£ç æˆå¯è¯»å­—ç¬¦ä¸²
console.log(keyword); // è¾“å‡ºï¼š"æƒ³çœ‹çœ‹ä»€ä¹ˆå‘¢~"
```







# ä¼šè¯

##  **ä¼šè¯ï¼ˆSessionï¼‰ä¸€èˆ¬æŒ‡ä»€ä¹ˆï¼Ÿ**

**ä¼šè¯ï¼ˆSessionï¼‰**æŒ‡çš„æ˜¯ **ä¸€æ¬¡ç”¨æˆ·å’ŒæœåŠ¡å™¨äº¤äº’çš„çŠ¶æ€**ï¼Œä»ç”¨æˆ·ç™»å½•æˆ–è®¿é—®å¼€å§‹ï¼Œåˆ°é€€å‡ºæˆ–è¶…æ—¶ç»“æŸçš„è¿™æ®µæ—¶é—´ã€‚

###  ä½œç”¨

- è®°å½•ç”¨æˆ·çŠ¶æ€ï¼ˆæ˜¯å¦ç™»å½•ï¼‰
- ä¿å­˜ç”¨æˆ·åœ¨ä¸€æ¬¡è®¿é—®è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®
- æ–¹ä¾¿åœ¨å¤šæ¬¡è¯·æ±‚ä¹‹é—´ä¿æŒç”¨æˆ·èº«ä»½ä¿¡æ¯

###  å…¸å‹ä½¿ç”¨

1. **ç”¨æˆ·ç™»å½•**
   - ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç  â†’ éªŒè¯æˆåŠŸ
   - æœåŠ¡å™¨ç”Ÿæˆ Sessionï¼ˆå¦‚éšæœº session_idï¼‰ â†’ è¿”å›ç»™ç”¨æˆ·ï¼ˆé€šå¸¸å­˜ cookieï¼‰
   - ç”¨æˆ·åç»­è¯·æ±‚å¸¦ä¸Š session_idï¼ŒæœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·èº«ä»½
2. **è´­ç‰©è½¦**
   - æœªç™»å½•ç”¨æˆ·ä¹Ÿå¯ä»¥å¾€è´­ç‰©è½¦åŠ ä¸œè¥¿
   - è¿™äº›ä¸´æ—¶æ•°æ®å­˜ Sessionï¼Œå…³é—­æµè§ˆå™¨æˆ–è¶…æ—¶åæ¶ˆå¤±
3. **æƒé™æ§åˆ¶**
   - Session ä¸­å¯ä»¥å­˜ç”¨æˆ·è§’è‰²æˆ–æƒé™
   - è®¿é—®å—é™é¡µé¢æ—¶æ£€æŸ¥ Session ä¿¡æ¯

###  å­˜å‚¨æ–¹å¼

- **æœåŠ¡å™¨ç«¯å­˜å‚¨**ï¼ˆæœ€å¸¸ç”¨ï¼‰
  - PHPï¼š`$_SESSION`
  - Node.js/Expressï¼š`express-session`
- **å®¢æˆ·ç«¯å­˜å‚¨ session_id**
  - Cookieã€LocalStorageã€JWTï¼ˆTokenï¼‰

## ç”¨æˆ·ç®¡ç†

ç”¨æˆ·ç®¡ç†æ˜¯å¯¹ç”¨æˆ·è´¦å·åŠæƒé™çš„æ•´ä½“ç®¡ç†ï¼Œé‡ç‚¹æ˜¯**ç”¨æˆ·ä¿¡æ¯å’Œè¡Œä¸ºç®¡ç†**ï¼Œè€Œ Session åªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªå·¥å…·ã€‚

###  åŒ…å«å†…å®¹

1. **ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æ³¨é”€**
2. **å¯†ç å’Œèº«ä»½éªŒè¯**
3. **æƒé™æ§åˆ¶ï¼ˆè§’è‰²/èµ„æºè®¿é—®ï¼‰**
4. **ç”¨æˆ·ä¿¡æ¯ç»´æŠ¤**ï¼ˆå¤´åƒã€æ˜µç§°ã€è”ç³»æ–¹å¼ï¼‰
5. **ä¼šè¯ç®¡ç†**ï¼ˆç™»å½•çŠ¶æ€ã€Tokenã€Session ç”Ÿå‘½å‘¨æœŸï¼‰

------

###  æ€»ç»“å¯¹æ¯”

| åç§°            | å®šä¹‰                             | ä½œç”¨                               |
| --------------- | -------------------------------- | ---------------------------------- |
| ä¼šè¯ï¼ˆSessionï¼‰ | ä¸€æ¬¡ç”¨æˆ·è®¿é—®æœåŠ¡å™¨çš„äº¤äº’çŠ¶æ€     | ä¿å­˜ç™»å½•çŠ¶æ€ã€ä¸´æ—¶æ•°æ®ã€æƒé™ä¿¡æ¯   |
| ç”¨æˆ·ç®¡ç†        | ç³»ç»Ÿå¯¹ç”¨æˆ·è´¦å·ã€æƒé™å’Œè¡Œä¸ºçš„ç®¡ç† | ç»´æŠ¤ç”¨æˆ·èº«ä»½ã€ä¿¡æ¯ã€æƒé™ã€ç™»å½•æ§åˆ¶ |

------

ç®€å•ç†è§£ï¼š

- **ç”¨æˆ·ç®¡ç†**ï¼šç®¡ç†â€œè°æ˜¯ç”¨æˆ·ï¼Œèƒ½åšä»€ä¹ˆâ€
- **ä¼šè¯ï¼ˆSessionï¼‰**ï¼šç®¡ç†â€œç”¨æˆ·ç°åœ¨åœ¨å¹²ä»€ä¹ˆï¼Œå½“å‰çŠ¶æ€æ˜¯ä»€ä¹ˆâ€



# çŠ¶æ€ç®¡ç†

##  åªåœ¨å½“å‰é¡µé¢æœ‰æ•ˆï¼ˆçŸ­æœŸçŠ¶æ€ï¼‰

- **é€‚ç”¨åœºæ™¯**ï¼šé¡µé¢åˆ·æ–°ä¼šä¸¢æ‰çŠ¶æ€ï¼Œåªéœ€è¦å½“å‰ç»„ä»¶æˆ–é¡µé¢ä½¿ç”¨

- **å®ç°æ–¹å¼**ï¼š

  1. **ç»„ä»¶å†…éƒ¨ state**ï¼ˆVue é‡Œçš„ `data` æˆ– React çš„ `useState`ï¼‰

     ```
     const status = ref(null); // Vue 3
     axios.get('/api/status').then(res => status.value = res.data);
     ```

  2. **é¡µé¢çº§ reactive / ref**ï¼ˆVue 3ï¼‰

     - ç”¨ `reactive` æˆ– `ref` ä¿å­˜è¯·æ±‚ç»“æœ

âœ… ä¼˜ç‚¹ï¼šç®€å•ï¼Œä¸éœ€è¦é¢å¤–ä¾èµ–
 âŒ ç¼ºç‚¹ï¼šåˆ·æ–°é¡µé¢å°±ä¸¢å¤±

------

##  è·¨ç»„ä»¶å…±äº«ï¼ˆçŸ­æœŸï¼‰

- **é€‚ç”¨åœºæ™¯**ï¼šå¤šä¸ªç»„ä»¶éƒ½éœ€è¦è®¿é—®è¯·æ±‚ç»“æœï¼Œä½†ä¸éœ€è¦æ°¸ä¹…ä¿å­˜

- **å®ç°æ–¹å¼**ï¼š

  1. **Vuex / Piniaï¼ˆVueï¼‰**

     ```
     // store.js
     const useStore = defineStore('main', {
       state: () => ({ status: null }),
       actions: {
         fetchStatus() {
           axios.get('/api/status').then(res => this.status = res.data)
         }
       }
     })
     ```

  2. **React Context / Zustand / Reduxï¼ˆReactï¼‰**

âœ… ä¼˜ç‚¹ï¼šæ–¹ä¾¿è·¨ç»„ä»¶å…±äº«
 âŒ ç¼ºç‚¹ï¼šåˆ·æ–°é¡µé¢ä¼šä¸¢å¤±

------

##  è·¨é¡µé¢æˆ–åˆ·æ–°åä»ä¿æŒçŠ¶æ€ï¼ˆé•¿æœŸçŠ¶æ€ï¼‰

- **é€‚ç”¨åœºæ™¯**ï¼šç”¨æˆ·åˆ·æ–°é¡µé¢åä»è¦ä¿ç•™çŠ¶æ€ï¼Œä¾‹å¦‚ç™»å½•çŠ¶æ€ã€åå¥½è®¾ç½®

- **å®ç°æ–¹å¼**ï¼š

  1. **LocalStorage / SessionStorage**

     ```
     // ä¿å­˜
     localStorage.setItem('status', JSON.stringify(res.data));
     // è¯»å–
     const status = JSON.parse(localStorage.getItem('status'));
     ```

     - `LocalStorage`ï¼šæ°¸ä¹…ä¿å­˜
     - `SessionStorage`ï¼šæµè§ˆå™¨å…³é—­åæ¸…ç©º

  2. **IndexedDB**

     - æ›´å¤æ‚çš„æ•°æ®ç»“æ„æˆ–å¤§å®¹é‡æ•°æ®
     - ç”¨äºç¦»çº¿ç¼“å­˜

âœ… ä¼˜ç‚¹ï¼šåˆ·æ–°ä¸ä¸¢å¤±ï¼Œç®€å•
 âŒ ç¼ºç‚¹ï¼šå‰ç«¯æ•°æ®å¯èƒ½è¢«ç¯¡æ”¹ï¼Œå®‰å…¨æ•æ„Ÿæ•°æ®ä¸å»ºè®®å­˜

------

##  çŠ¶æ€ç®¡ç† + æœ¬åœ°å­˜å‚¨ç»“åˆï¼ˆæ¨èï¼‰

- å¯¹äºå¤æ‚åº”ç”¨ï¼Œå»ºè®®ï¼š
  - **å…¨å±€çŠ¶æ€ç®¡ç†ï¼ˆVuex/Piniaï¼‰** ä¿å­˜çŠ¶æ€
  - **LocalStorage** åšæŒä¹…åŒ–
  - é¡µé¢åŠ è½½æ—¶å…ˆä» LocalStorage åˆå§‹åŒ–çŠ¶æ€ï¼Œå†å‘è¯·æ±‚åŒæ­¥

```
// Vue 3 + Pinia ç¤ºä¾‹
const useStore = defineStore('main', {
  state: () => ({
    status: JSON.parse(localStorage.getItem('status')) || null
  }),
  actions: {
    fetchStatus() {
      axios.get('/api/status').then(res => {
        this.status = res.data;
        localStorage.setItem('status', JSON.stringify(res.data));
      })
    }
  }
})
```

âœ… ä¼˜ç‚¹ï¼šåˆ·æ–°é¡µé¢ä¸ä¸¢å¤±çŠ¶æ€ï¼Œè·¨ç»„ä»¶å…±äº«æ–¹ä¾¿

------

###  æ€»ç»“é€‰æ‹©ç­–ç•¥

| ç”Ÿå‘½å‘¨æœŸ           | æ–¹å¼                                     |
| ------------------ | ---------------------------------------- |
| é¡µé¢çº§ï¼ˆçŸ­æœŸï¼‰     | ç»„ä»¶å†…éƒ¨ state / ref / reactive          |
| è·¨ç»„ä»¶ï¼ˆçŸ­æœŸï¼‰     | Vuex / Pinia / Context / Redux           |
| åˆ·æ–°ä¸ä¸¢å¤±ï¼ˆé•¿æœŸï¼‰ | LocalStorage / SessionStorage + çŠ¶æ€ç®¡ç† |



# Vuex

### åˆ›å»º

```js
import { createStore } from 'vuex'

const store = createStore({
  state: {
    user: JSON.parse(localStorage.getItem('user')) || null,
    token: localStorage.getItem('token') || ''
  },
  mutations: {
    setUser(state, user) {
      state.user = user
      localStorage.setItem('user', JSON.stringify(user)) // åŒæ­¥åˆ° localStorage
    },
    setToken(state, token) {
      state.token = token
      localStorage.setItem('token', token)
    },
    logout(state) {
      state.user = null
      state.token = ''
      localStorage.removeItem('user')
      localStorage.removeItem('token')
    }
  },
  actions: {
    login({ commit }, { user, token }) {
      commit('setUser', user)
      commit('setToken', token)
    },
    logout({ commit }) {
      commit('logout')
    }
  }
})

export default store
```

### ç»„ä»¶ä¸­ä½¿ç”¨

```js
import { useStore } from 'vuex'
import { computed } from 'vue'

export default {
  setup() {
    const store = useStore()

    const user = computed(() => store.state.user)

    const login = () => {
      const userData = {id: 1, name: 'Alice'}
      const token = 'abc123'
      store.dispatch('login', { user: userData, token })
    }

    const logout = () => {
      store.dispatch('logout')
    }

    return { user, login, logout }
  }
}

```



# é˜²ç«å¢™è§„åˆ™

æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™

### firewalldï¼ˆCentOS 7+/RHELï¼‰

```
sudo firewall-cmd --list-all
```

ä¼šåˆ—å‡ºå½“å‰åŒºåŸŸï¼ˆzoneï¼‰çš„ç«¯å£å’Œæ¥æº IPã€‚
 å¦‚æœç”¨äº† `--add-rich-rule`ï¼Œå¯ä»¥è¿™æ ·æŸ¥ï¼š

```
sudo firewall-cmd --list-rich-rules
```

------

### ufwï¼ˆUbuntu/Debianï¼‰

```
sudo ufw status verbose
```

ä¼šæ˜¾ç¤ºç±»ä¼¼ï¼š

```
22/tcp                   ALLOW IN    1.2.3.4
```

è¡¨ç¤º 22 ç«¯å£åªå…è®¸ 1.2.3.4 è®¿é—®ã€‚

## è®¾ç½®è§„åˆ™

### CentOS 7+/RHEL (firewalld)

 åªå…è®¸ `1.2.3.4` è®¿é—® **22 ç«¯å£**ï¼š

```
sudo firewall-cmd --permanent --add-rich-rule="rule family='ipv4' \
source address='1.2.3.4' port protocol='tcp' port='22' accept"
sudo firewall-cmd --reload
```

 å¦‚æœåªå…è®¸ä¸€ä¸ªç½‘æ®µï¼ˆæ¯”å¦‚å…¬å¸ç½‘æ®µ `1.2.3.0/24`ï¼‰ï¼š

```
sudo firewall-cmd --permanent --add-rich-rule="rule family='ipv4' \
source address='1.2.3.0/24' port protocol='tcp' port='22' accept"
sudo firewall-cmd --reload
```

 æŸ¥çœ‹è§„åˆ™ï¼š

```
sudo firewall-cmd --list-rich-rules
```

------

###  Ubuntu/Debian (ufw)

 é»˜è®¤æ‹’ç»ï¼š

```
sudo ufw default deny incoming
```

 åªå…è®¸æŸä¸ª IP è®¿é—® SSHï¼š

```
sudo ufw allow from 223.74.156.51 to any port 22 proto tcp
```

 å¦‚æœè¦å¼€æ”¾ä¸€ä¸ªç½‘æ®µï¼š

```
sudo ufw allow from 1.2.3.0/24 to any port 22 proto tcp
```

 æŸ¥çœ‹è§„åˆ™ï¼š

```
sudo ufw status verbose
```



```html
    <!-- element-ui -->
    <!-- Import style -->
    <link rel="stylesheet" href="//unpkg.com/element-plus/dist/index.css" />
    <!-- Import Vue 3 -->
    <script src="//unpkg.com/vue@3"></script>
    <!-- Import component library -->
    <script src="//unpkg.com/element-plus"></script>
    <!-- åœ°å›¾LocationIQ API  -->
    <script src='https://tiles.locationiq.com/v3/libs/maplibre-gl/1.15.2/maplibre-gl.js'></script>
    <link href='https://tiles.locationiq.com/v3/libs/maplibre-gl/1.15.2/maplibre-gl.css' rel='stylesheet' />
    <script src='https://tiles.locationiq.com/v3/js/liq-styles-ctrl-libre-gl.js?v=0.1.8'></script>
    <link href='https://tiles.locationiq.com/v3/css/liq-styles-ctrl-libre-gl.css?v=0.1.8' rel="stylesheet" />
    <script src="https://tiles.locationiq.com/v3/js/lang-libre-gl.min.js?v=0.1.8"></script>
    <link href="{:config('WEB_SITE_ICO')}" type="image/x-icon" rel="shortcut icon" />
    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


    <!-- Vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
```



# END

